<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dating App Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                    }
                }
            },
            darkMode: 'class'
        }
    </script>
    <style>
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .dark .dark\:bg-dark {
            background-color: #181818;
        }

        .dark .dark\:text-white {
            color: #ffffff;
        }

        .dark .dark\:border-gray-700 {
            border-color: #374151;
        }

        .dark .dark\:bg-gray-800 {
            background-color: #1f2937;
        }

        .dark .dark\:text-gray-300 {
            color: #d1d5db;
        }
    </style>
</head>

<body class="bg-gray-50 dark:bg-dark text-gray-800 dark:text-white min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <h1 class="text-3xl font-bold text-center mb-2 text-primary">Dating App Manager</h1>
        <p class="text-center mb-6">Keep track of your matches, conversations, and profile performance</p>

        <!-- Tabs Navigation -->
        <div class="flex border-b border-gray-200 dark:border-gray-700 mb-6 overflow-x-auto">
            <button class="tab-button py-2 px-4 font-medium text-primary border-b-2 border-primary" data-tab="matches">
                <i class="fas fa-user-friends mr-2"></i>Matches
            </button>
            <button class="tab-button py-2 px-4 font-medium text-gray-500 dark:text-gray-300 hover:text-primary"
                data-tab="reminders">
                <i class="fas fa-bell mr-2"></i>Reminders
            </button>
            <button class="tab-button py-2 px-4 font-medium text-gray-500 dark:text-gray-300 hover:text-primary"
                data-tab="profiles">
                <i class="fas fa-id-card mr-2"></i>Profile Stats
            </button>
            <button class="tab-button py-2 px-4 font-medium text-gray-500 dark:text-gray-300 hover:text-primary"
                data-tab="settings">
                <i class="fas fa-cog mr-2"></i>Settings
            </button>
        </div>

        <!-- Matches Tab -->
        <div id="matches" class="tab-content active">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold">My Matches</h2>
                <button id="add-match-btn" class="bg-primary hover:bg-primary/90 text-white py-2 px-4 rounded-lg">
                    <i class="fas fa-plus mr-2"></i>Add Match
                </button>
            </div>

            <div class="mb-4 relative">
                <input type="text" id="match-search" placeholder="Search matches..."
                    class="w-full p-3 pl-10 rounded-lg border border-gray-300 dark:border-gray-700 dark:bg-gray-800 text-base">
                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>

            <div id="matches-list" class="space-y-4">
                <!-- Matches will be displayed here -->
                <p id="no-matches" class="text-center py-6 text-gray-500 dark:text-gray-400">No matches added yet. Add
                    your first match!</p>
            </div>
        </div>

        <!-- Reminders Tab -->
        <div id="reminders" class="tab-content">
            <h2 class="text-xl font-semibold mb-4">Conversation Reminders</h2>

            <div class="mb-6">
                <h3 class="font-medium mb-2 text-red-500"><i class="fas fa-exclamation-circle mr-2"></i>Haven't Messaged
                    Yet</h3>
                <div id="not-messaged-list" class="space-y-2">
                    <!-- Not messaged matches here -->
                </div>
                <p id="no-not-messaged" class="text-center py-2 text-gray-500 dark:text-gray-400">No pending first
                    messages</p>
            </div>

            <div class="mb-6">
                <h3 class="font-medium mb-2 text-orange-500"><i class="fas fa-reply mr-2"></i>Need to Reply</h3>
                <div id="need-reply-list" class="space-y-2">
                    <!-- Need to reply matches here -->
                </div>
                <p id="no-need-reply" class="text-center py-2 text-gray-500 dark:text-gray-400">No pending replies</p>
            </div>

            <div class="mb-6">
                <h3 class="font-medium mb-2 text-green-500"><i class="fas fa-calendar-alt mr-2"></i>Follow Up for Meetup
                </h3>
                <div id="follow-up-list" class="space-y-2">
                    <!-- Follow up matches here -->
                </div>
                <p id="no-follow-up" class="text-center py-2 text-gray-500 dark:text-gray-400">No pending meetup
                    follow-ups</p>
            </div>
        </div>

        <!-- Profiles Tab -->
        <div id="profiles" class="tab-content">
            <h2 class="text-xl font-semibold mb-4">Dating Profile Performance</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
                    <h3 class="font-medium mb-2">App Performance</h3>
                    <div id="app-stats" class="space-y-2">
                        <!-- App stats go here -->
                    </div>
                    <button id="add-app-btn" class="mt-3 text-primary hover:underline text-sm">
                        <i class="fas fa-plus-circle mr-1"></i>Add Dating App
                    </button>
                </div>

                <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
                    <h3 class="font-medium mb-2">Weekly Match Rate</h3>
                    <div id="match-trend" class="h-48 flex items-end justify-between space-x-1 mt-4">
                        <!-- Simple bar chart will be rendered here -->
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-6">
                <h3 class="font-medium mb-3">Profile Change Log</h3>
                <div id="profile-changes" class="space-y-3">
                    <!-- Profile changes go here -->
                </div>
                <button id="add-change-btn" class="mt-3 text-primary hover:underline text-sm">
                    <i class="fas fa-plus-circle mr-1"></i>Log Profile Change
                </button>
            </div>

            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
                <h3 class="font-medium mb-3">Profile Improvement Ideas</h3>
                <textarea id="profile-ideas"
                    class="w-full h-24 p-2 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base"
                    placeholder="Write your profile improvement ideas here..."></textarea>
                <button id="save-ideas-btn"
                    class="mt-2 bg-primary hover:bg-primary/90 text-white py-1 px-3 rounded-lg text-sm">
                    <i class="fas fa-save mr-1"></i>Save Ideas
                </button>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <h2 class="text-xl font-semibold mb-4">Settings</h2>

            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-6">
                <h3 class="font-medium mb-3">App Preferences</h3>

                <div class="flex items-center justify-between mb-3">
                    <span>Dark Mode</span>
                    <label class="switch">
                        <input type="checkbox" id="dark-mode-toggle">
                        <span class="slider w-12 h-6 bg-gray-300 dark:bg-gray-700 rounded-full relative cursor-pointer">
                            <span
                                class="slider-button w-5 h-5 bg-white rounded-full absolute top-0.5 left-0.5 transition-all duration-300 shadow"></span>
                        </span>
                    </label>
                </div>

                <div class="mb-3">
                    <label class="block mb-1">Reminder Period (days)</label>
                    <select id="reminder-days"
                        class="w-full p-2 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base">
                        <option value="1">1 day</option>
                        <option value="2" selected>2 days</option>
                        <option value="3">3 days</option>
                        <option value="5">5 days</option>
                        <option value="7">7 days</option>
                    </select>
                </div>
            </div>

            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-6">
                <h3 class="font-medium mb-3">Data Management</h3>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <button id="export-data-btn" class="bg-primary hover:bg-primary/90 text-white py-2 px-4 rounded-lg">
                        <i class="fas fa-download mr-2"></i>Export Data
                    </button>
                    <button id="import-data-btn"
                        class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 py-2 px-4 rounded-lg">
                        <i class="fas fa-upload mr-2"></i>Import Data
                    </button>
                </div>

                <div id="data-transfer-area" class="mt-4 hidden">
                    <textarea id="data-text"
                        class="w-full h-32 p-2 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg mb-2 text-xs font-mono text-base"
                        placeholder="Paste exported data here..."></textarea>
                    <div class="flex justify-end">
                        <button id="confirm-import-btn"
                            class="bg-green-600 hover:bg-green-700 text-white py-1 px-3 rounded-lg text-sm ml-2 hidden">
                            <i class="fas fa-check mr-1"></i>Confirm Import
                        </button>
                        <button id="copy-export-btn"
                            class="bg-blue-600 hover:bg-blue-700 text-white py-1 px-3 rounded-lg text-sm ml-2 hidden">
                            <i class="fas fa-copy mr-1"></i>Copy to Clipboard
                        </button>
                        <button id="cancel-transfer-btn"
                            class="bg-gray-500 hover:bg-gray-600 text-white py-1 px-3 rounded-lg text-sm ml-2">
                            <i class="fas fa-times mr-1"></i>Cancel
                        </button>
                    </div>
                </div>

                <button id="clear-data-btn" class="mt-4 text-red-500 hover:text-red-600 hover:underline text-sm">
                    <i class="fas fa-trash-alt mr-1"></i>Clear All Data
                </button>
            </div>
        </div>
    </div>

    <!-- Add Match Modal -->
    <div id="add-match-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-semibold mb-4">Add New Match</h3>

            <div class="mb-4">
                <label class="block mb-1">Name*</label>
                <input type="text" id="match-name"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base"
                    placeholder="Enter name">
            </div>

            <div class="mb-4">
                <label class="block mb-1">Dating App*</label>
                <select id="match-app"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base">
                    <option value="">Select dating app</option>
                    <option value="Tinder">Tinder</option>
                    <option value="Bumble">Bumble</option>
                    <option value="Hinge">Hinge</option>
                    <option value="OkCupid">OkCupid</option>
                    <option value="Coffee Meets Bagel">Coffee Meets Bagel</option>
                    <option value="other">Other</option>
                </select>
                <input type="text" id="other-app"
                    class="w-full mt-2 p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg hidden text-base"
                    placeholder="Enter app name">
            </div>

            <div class="mb-4">
                <label class="block mb-1">Match Date</label>
                <input type="date" id="match-date"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base">
            </div>

            <div class="mb-4">
                <label class="block mb-1">Conversation Status*</label>
                <select id="match-status"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base">
                    <option value="not_messaged">Haven't Messaged Yet</option>
                    <option value="need_reply">Need to Reply</option>
                    <option value="active_conversation">Active Conversation</option>
                    <option value="plan_meetup">Planning Meetup</option>
                    <option value="inactive">Inactive</option>
                </select>
            </div>

            <div class="mb-4">
                <label class="block mb-1">Notes</label>
                <textarea id="match-notes"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg h-20 text-base"
                    placeholder="Add any notes about this match..."></textarea>
            </div>

            <div class="flex justify-end space-x-2">
                <button id="cancel-add-match"
                    class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 py-2 px-4 rounded-lg">Cancel</button>
                <button id="save-match" class="bg-primary hover:bg-primary/90 text-white py-2 px-4 rounded-lg">Save
                    Match</button>
            </div>
        </div>
    </div>

    <!-- Edit Match Modal -->
    <div id="edit-match-modal"
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-semibold mb-4">Edit Match</h3>

            <div class="mb-4">
                <label class="block mb-1">Name*</label>
                <input type="text" id="edit-match-name"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base"
                    placeholder="Enter name">
            </div>

            <div class="mb-4">
                <label class="block mb-1">Dating App*</label>
                <select id="edit-match-app"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base">
                    <option value="">Select dating app</option>
                    <option value="Tinder">Tinder</option>
                    <option value="Bumble">Bumble</option>
                    <option value="Hinge">Hinge</option>
                    <option value="OkCupid">OkCupid</option>
                    <option value="Coffee Meets Bagel">Coffee Meets Bagel</option>
                    <option value="other">Other</option>
                </select>
                <input type="text" id="edit-other-app"
                    class="w-full mt-2 p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg hidden text-base"
                    placeholder="Enter app name">
            </div>

            <div class="mb-4">
                <label class="block mb-1">Match Date</label>
                <input type="date" id="edit-match-date"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base">
            </div>

            <div class="mb-4">
                <label class="block mb-1">Conversation Status*</label>
                <select id="edit-match-status"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base">
                    <option value="not_messaged">Haven't Messaged Yet</option>
                    <option value="need_reply">Need to Reply</option>
                    <option value="active_conversation">Active Conversation</option>
                    <option value="plan_meetup">Planning Meetup</option>
                    <option value="inactive">Inactive</option>
                </select>
            </div>

            <div class="mb-4">
                <label class="block mb-1">Last Contact Date</label>
                <input type="date" id="edit-last-contact"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base">
            </div>

            <div class="mb-4">
                <label class="block mb-1">Notes</label>
                <textarea id="edit-match-notes"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg h-20 text-base"
                    placeholder="Add any notes about this match..."></textarea>
            </div>

            <div class="flex justify-end space-x-2">
                <button id="delete-match" class="text-red-500 hover:text-red-600 mr-auto">
                    <i class="fas fa-trash-alt mr-1"></i>Delete
                </button>
                <button id="cancel-edit-match"
                    class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 py-2 px-4 rounded-lg">Cancel</button>
                <button id="update-match"
                    class="bg-primary hover:bg-primary/90 text-white py-2 px-4 rounded-lg">Update</button>
            </div>
        </div>
    </div>

    <!-- Add App Modal -->
    <div id="add-app-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-semibold mb-4">Add Dating App</h3>

            <div class="mb-4">
                <label class="block mb-1">App Name*</label>
                <input type="text" id="app-name"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base"
                    placeholder="Enter app name">
            </div>

            <div class="mb-4">
                <label class="block mb-1">Weekly Match Count</label>
                <input type="number" id="match-count" min="0"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base"
                    placeholder="Enter number of matches">
            </div>

            <div class="mb-4">
                <label class="block mb-1">Notes</label>
                <textarea id="app-notes"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg h-20 text-base"
                    placeholder="Add any notes about this app..."></textarea>
            </div>

            <div class="flex justify-end space-x-2">
                <button id="cancel-add-app"
                    class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 py-2 px-4 rounded-lg">Cancel</button>
                <button id="save-app" class="bg-primary hover:bg-primary/90 text-white py-2 px-4 rounded-lg">Save
                    App</button>
            </div>
        </div>
    </div>

    <!-- Add Profile Change Modal -->
    <div id="add-change-modal"
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-semibold mb-4">Log Profile Change</h3>

            <div class="mb-4">
                <label class="block mb-1">App*</label>
                <select id="change-app"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base">
                    <option value="">Select dating app</option>
                    <!-- Will be populated dynamically -->
                </select>
            </div>

            <div class="mb-4">
                <label class="block mb-1">Change Date*</label>
                <input type="date" id="change-date"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg text-base">
            </div>

            <div class="mb-4">
                <label class="block mb-1">What Changed*</label>
                <textarea id="change-description"
                    class="w-full p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-lg h-20 text-base"
                    placeholder="Describe what you changed on your profile..."></textarea>
            </div>

            <div class="flex justify-end space-x-2">
                <button id="cancel-add-change"
                    class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 py-2 px-4 rounded-lg">Cancel</button>
                <button id="save-change" class="bg-primary hover:bg-primary/90 text-white py-2 px-4 rounded-lg">Save
                    Change</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirm-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-semibold mb-4">Confirm Action</h3>
            <p id="confirm-message" class="mb-6">Are you sure you want to proceed?</p>

            <div class="flex justify-end space-x-2">
                <button id="cancel-confirm"
                    class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 py-2 px-4 rounded-lg">Cancel</button>
                <button id="confirm-action"
                    class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg">Confirm</button>
            </div>
        </div>
    </div>

    <script>
        // Check for dark mode preference
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
            document.getElementById('dark-mode-toggle').checked = true;
        }

        // Dark mode toggle listener
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
                document.getElementById('dark-mode-toggle').checked = true;
            } else {
                document.documentElement.classList.remove('dark');
                document.getElementById('dark-mode-toggle').checked = false;
            }
        });

        // Data storage and initialization
        const appData = {
            matches: [],
            apps: [],
            profileChanges: [],
            profileIdeas: '',
            settings: {
                reminderDays: 2,
                darkMode: window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
            }
        };

        // Load data from localStorage
        function loadData() {
            const savedData = localStorage.getItem('datingAppManager');
            if (savedData) {
                const parsed = JSON.parse(savedData);
                Object.assign(appData, parsed);

                // Set UI based on saved data
                if (appData.settings.darkMode) {
                    document.documentElement.classList.add('dark');
                    document.getElementById('dark-mode-toggle').checked = true;
                } else {
                    document.documentElement.classList.remove('dark');
                    document.getElementById('dark-mode-toggle').checked = false;
                }

                document.getElementById('reminder-days').value = appData.settings.reminderDays;
                document.getElementById('profile-ideas').value = appData.profileIdeas;
            }

            renderMatches();
            renderReminders();
            renderProfileStats();
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('datingAppManager', JSON.stringify(appData));
        }

        // Tab functionality
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.dataset.tab;

                // Update active tab button
                tabButtons.forEach(btn => {
                    if (btn.dataset.tab === tabId) {
                        btn.classList.add('text-primary');
                        btn.classList.add('border-b-2');
                        btn.classList.add('border-primary');
                        btn.classList.remove('text-gray-500');
                        btn.classList.remove('dark:text-gray-300');
                    } else {
                        btn.classList.remove('text-primary');
                        btn.classList.remove('border-b-2');
                        btn.classList.remove('border-primary');
                        btn.classList.add('text-gray-500');
                        btn.classList.add('dark:text-gray-300');
                    }
                });

                // Show active tab content
                tabContents.forEach(content => {
                    if (content.id === tabId) {
                        content.classList.add('active');
                    } else {
                        content.classList.remove('active');
                    }
                });
            });
        });

        // Format date for display
        function formatDate(dateString) {
            if (!dateString) return 'Unknown';

            const date = new Date(dateString);
            const today = new Date();
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);

            if (date.toDateString() === today.toDateString()) {
                return 'Today';
            } else if (date.toDateString() === yesterday.toDateString()) {
                return 'Yesterday';
            } else {
                return date.toLocaleDateString();
            }
        }

        // Generate a unique ID
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substring(2);
        }

        // Render matches in the matches tab
        function renderMatches() {
            const matchesList = document.getElementById('matches-list');
            const noMatchesMsg = document.getElementById('no-matches');
            const searchTerm = document.getElementById('match-search').value.toLowerCase();

            // Filter matches based on search term
            const filteredMatches = appData.matches.filter(match =>
                match.name.toLowerCase().includes(searchTerm) ||
                match.app.toLowerCase().includes(searchTerm) ||
                (match.notes && match.notes.toLowerCase().includes(searchTerm))
            );

            if (filteredMatches.length === 0) {
                noMatchesMsg.style.display = 'block';
                matchesList.innerHTML = '';
                return;
            }

            noMatchesMsg.style.display = 'none';
            matchesList.innerHTML = '';

            // Sort matches: active conversations first, then by match date (newest first)
            filteredMatches.sort((a, b) => {
                const statusOrder = {
                    'active_conversation': 0,
                    'plan_meetup': 1,
                    'need_reply': 2,
                    'not_messaged': 3,
                    'inactive': 4
                };

                if (statusOrder[a.status] !== statusOrder[b.status]) {
                    return statusOrder[a.status] - statusOrder[b.status];
                }

                const dateA = a.matchDate ? new Date(a.matchDate) : new Date(0);
                const dateB = b.matchDate ? new Date(b.matchDate) : new Date(0);
                return dateB - dateA;
            });

            // Generate match cards
            filteredMatches.forEach(match => {
                const statusDisplay = {
                    'not_messaged': '<span class="text-red-500">Haven\'t Messaged</span>',
                    'need_reply': '<span class="text-orange-500">Need to Reply</span>',
                    'active_conversation': '<span class="text-green-500">Active Conversation</span>',
                    'plan_meetup': '<span class="text-blue-500">Planning Meetup</span>',
                    'inactive': '<span class="text-gray-500">Inactive</span>'
                };

                const matchCard = document.createElement('div');
                matchCard.className = 'bg-white dark:bg-gray-800 p-4 rounded-lg shadow';
                matchCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-semibold text-lg">${match.name}</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                <i class="fas fa-mobile-alt mr-1"></i>${match.app}
                            </p>
                            <p class="text-sm mt-1">${statusDisplay[match.status]}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                <i class="fas fa-calendar-alt mr-1"></i>Matched: ${formatDate(match.matchDate)}
                            </p>
                            ${match.lastContact ? `
                                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                                    <i class="fas fa-comment mr-1"></i>Last Contact: ${formatDate(match.lastContact)}
                                </p>
                            ` : ''}
                        </div>
                    </div>
                    ${match.notes ? `
                        <div class="mt-2 pt-2 border-t border-gray-200 dark:border-gray-700">
                            <p class="text-sm text-gray-700 dark:text-gray-300">${match.notes}</p>
                        </div>
                    ` : ''}
                    <div class="mt-3 flex justify-end space-x-2">
                        <button class="edit-match-btn text-primary hover:text-primary/80 text-sm" data-id="${match.id}">
                            <i class="fas fa-edit mr-1"></i>Edit
                        </button>
                    </div>
                `;

                matchesList.appendChild(matchCard);
            });

            // Add event listeners to edit buttons
            document.querySelectorAll('.edit-match-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const matchId = button.dataset.id;
                    openEditMatchModal(matchId);
                });
            });
        }

        // Render reminders in the reminders tab
        function renderReminders() {
            const notMessagedList = document.getElementById('not-messaged-list');
            const needReplyList = document.getElementById('need-reply-list');
            const followUpList = document.getElementById('follow-up-list');
            const noNotMessaged = document.getElementById('no-not-messaged');
            const noNeedReply = document.getElementById('no-need-reply');
            const noFollowUp = document.getElementById('no-follow-up');

            notMessagedList.innerHTML = '';
            needReplyList.innerHTML = '';
            followUpList.innerHTML = '';

            // Get matches by status
            const notMessaged = appData.matches.filter(m => m.status === 'not_messaged');
            const needReply = appData.matches.filter(m => m.status === 'need_reply');
            const followUp = appData.matches.filter(m => m.status === 'plan_meetup');

            // Sort by match date or last contact date (newest matches first)
            const sortMatches = matches => {
                return matches.sort((a, b) => {
                    const dateA = a.lastContact ? new Date(a.lastContact) : a.matchDate ? new Date(a.matchDate) : new Date(0);
                    const dateB = b.lastContact ? new Date(b.lastContact) : b.matchDate ? new Date(b.matchDate) : new Date(0);
                    return dateB - dateA;
                });
            };

            const sortedNotMessaged = sortMatches(notMessaged);
            const sortedNeedReply = sortMatches(needReply);
            const sortedFollowUp = sortMatches(followUp);

            // Display matches that need first message
            if (sortedNotMessaged.length > 0) {
                noNotMessaged.style.display = 'none';
                sortedNotMessaged.forEach(match => {
                    const matchItem = document.createElement('div');
                    matchItem.className = 'p-3 rounded-lg bg-white dark:bg-gray-800 shadow-sm';
                    matchItem.innerHTML = `
                        <div class="flex justify-between">
                            <div>
                                <span class="font-medium">${match.name}</span>
                                <span class="text-sm text-gray-600 dark:text-gray-400"> (${match.app})</span>
                            </div>
                            <span class="text-sm text-gray-600 dark:text-gray-400">Matched: ${formatDate(match.matchDate)}</span>
                        </div>
                    `;
                    matchItem.addEventListener('click', () => openEditMatchModal(match.id));
                    notMessagedList.appendChild(matchItem);
                });
            } else {
                noNotMessaged.style.display = 'block';
            }

            // Display matches that need reply
            if (sortedNeedReply.length > 0) {
                noNeedReply.style.display = 'none';
                sortedNeedReply.forEach(match => {
                    const matchItem = document.createElement('div');
                    matchItem.className = 'p-3 rounded-lg bg-white dark:bg-gray-800 shadow-sm';
                    matchItem.innerHTML = `
                        <div class="flex justify-between">
                            <div>
                                <span class="font-medium">${match.name}</span>
                                <span class="text-sm text-gray-600 dark:text-gray-400"> (${match.app})</span>
                            </div>
                            <span class="text-sm text-gray-600 dark:text-gray-400">Last contact: ${formatDate(match.lastContact)}</span>
                        </div>
                    `;
                    matchItem.addEventListener('click', () => openEditMatchModal(match.id));
                    needReplyList.appendChild(matchItem);
                });
            } else {
                noNeedReply.style.display = 'block';
            }

            // Display matches that need follow up for meetup
            if (sortedFollowUp.length > 0) {
                noFollowUp.style.display = 'none';
                sortedFollowUp.forEach(match => {
                    const matchItem = document.createElement('div');
                    matchItem.className = 'p-3 rounded-lg bg-white dark:bg-gray-800 shadow-sm';
                    matchItem.innerHTML = `
                        <div class="flex justify-between">
                            <div>
                                <span class="font-medium">${match.name}</span>
                                <span class="text-sm text-gray-600 dark:text-gray-400"> (${match.app})</span>
                            </div>
                            <span class="text-sm text-gray-600 dark:text-gray-400">Last contact: ${formatDate(match.lastContact)}</span>
                        </div>
                    `;
                    matchItem.addEventListener('click', () => openEditMatchModal(match.id));
                    followUpList.appendChild(matchItem);
                });
            } else {
                noFollowUp.style.display = 'block';
            }
        }

        // Render profile stats in the profiles tab
        function renderProfileStats() {
            const appStats = document.getElementById('app-stats');
            const matchTrend = document.getElementById('match-trend');
            const profileChanges = document.getElementById('profile-changes');
            const changeAppSelect = document.getElementById('change-app');

            // Clear previous content
            appStats.innerHTML = '';
            matchTrend.innerHTML = '';
            profileChanges.innerHTML = '';

            // Populate app select for profile changes
            changeAppSelect.innerHTML = '<option value="">Select dating app</option>';

            // Display app stats
            if (appData.apps.length > 0) {
                appData.apps.forEach(app => {
                    const appStat = document.createElement('div');
                    appStat.className = 'flex justify-between items-center';
                    appStat.innerHTML = `
                        <span>${app.name}</span>
                        <span class="font-semibold">${app.matchCount || 0} matches/week</span>
                    `;
                    appStats.appendChild(appStat);

                    // Add to app select dropdown
                    const option = document.createElement('option');
                    option.value = app.name;
                    option.textContent = app.name;
                    changeAppSelect.appendChild(option);
                });
            } else {
                appStats.innerHTML = '<p class="text-center py-2 text-gray-500 dark:text-gray-400">No apps added yet</p>';
            }

            // Create simple match trend chart
            if (appData.apps.length > 0) {
                const maxMatches = Math.max(...appData.apps.map(app => app.matchCount || 0), 5);

                appData.apps.forEach(app => {
                    const barHeight = app.matchCount ? (app.matchCount / maxMatches) * 100 : 0;

                    const bar = document.createElement('div');
                    bar.className = 'flex flex-col items-center';
                    bar.innerHTML = `
                        <div class="text-xs mb-1">${app.matchCount || 0}</div>
                        <div class="w-6 bg-primary rounded-t" style="height: ${barHeight}%"></div>
                        <div class="text-xs mt-1 text-center w-12 overflow-hidden text-ellipsis">${app.name}</div>
                    `;
                    matchTrend.appendChild(bar);
                });
            } else {
                matchTrend.innerHTML = '<p class="w-full text-center py-2 text-gray-500 dark:text-gray-400">No data to display</p>';
            }

            // Display profile changes
            if (appData.profileChanges.length > 0) {
                // Sort profile changes by date (newest first)
                const sortedChanges = [...appData.profileChanges].sort((a, b) => {
                    return new Date(b.date) - new Date(a.date);
                });

                sortedChanges.forEach(change => {
                    const changeItem = document.createElement('div');
                    changeItem.className = 'border-b border-gray-200 dark:border-gray-700 pb-3';
                    changeItem.innerHTML = `
                        <div class="flex justify-between">
                            <span class="font-medium">${change.app}</span>
                            <span class="text-sm text-gray-600 dark:text-gray-400">${formatDate(change.date)}</span>
                        </div>
                        <p class="text-sm mt-1">${change.description}</p>
                    `;
                    profileChanges.appendChild(changeItem);
                });
            } else {
                profileChanges.innerHTML = '<p class="text-center py-2 text-gray-500 dark:text-gray-400">No profile changes logged</p>';
            }
        }

        // Add Match Modal Functions
        function openAddMatchModal() {
            document.getElementById('add-match-modal').classList.remove('hidden');
            document.getElementById('match-name').focus();

            // Reset form
            document.getElementById('match-name').value = '';
            document.getElementById('match-app').value = '';
            document.getElementById('other-app').value = '';
            document.getElementById('other-app').classList.add('hidden');
            document.getElementById('match-date').value = new Date().toISOString().split('T')[0];
            document.getElementById('match-status').value = 'not_messaged';
            document.getElementById('match-notes').value = '';
        }

        function closeAddMatchModal() {
            document.getElementById('add-match-modal').classList.add('hidden');
        }

        // Edit Match Modal Functions
        function openEditMatchModal(matchId) {
            const match = appData.matches.find(m => m.id === matchId);
            if (!match) return;

            document.getElementById('edit-match-modal').classList.remove('hidden');

            // Populate form with match data
            document.getElementById('edit-match-name').value = match.name;

            const appSelect = document.getElementById('edit-match-app');
            const otherAppInput = document.getElementById('edit-other-app');

            const defaultApps = ['Tinder', 'Bumble', 'Hinge', 'OkCupid', 'Coffee Meets Bagel'];
            if (defaultApps.includes(match.app)) {
                appSelect.value = match.app;
                otherAppInput.classList.add('hidden');
            } else {
                appSelect.value = 'other';
                otherAppInput.value = match.app;
                otherAppInput.classList.remove('hidden');
            }

            document.getElementById('edit-match-date').value = match.matchDate || '';
            document.getElementById('edit-match-status').value = match.status;
            document.getElementById('edit-last-contact').value = match.lastContact || '';
            document.getElementById('edit-match-notes').value = match.notes || '';

            // Store match ID for update function
            document.getElementById('update-match').dataset.id = matchId;
            document.getElementById('delete-match').dataset.id = matchId;
        }

        function closeEditMatchModal() {
            document.getElementById('edit-match-modal').classList.add('hidden');
        }

        // Add App Modal Functions
        function openAddAppModal() {
            document.getElementById('add-app-modal').classList.remove('hidden');
            document.getElementById('app-name').focus();

            // Reset form
            document.getElementById('app-name').value = '';
            document.getElementById('match-count').value = '';
            document.getElementById('app-notes').value = '';
        }

        function closeAddAppModal() {
            document.getElementById('add-app-modal').classList.add('hidden');
        }

        // Add Profile Change Modal Functions
        function openAddChangeModal() {
            document.getElementById('add-change-modal').classList.remove('hidden');

            // Reset form
            document.getElementById('change-date').value = new Date().toISOString().split('T')[0];
            document.getElementById('change-description').value = '';

            // Populate app select
            renderProfileStats();
        }

        function closeAddChangeModal() {
            document.getElementById('add-change-modal').classList.add('hidden');
        }

        // Confirm Modal Functions
        function openConfirmModal(message, callback) {
            document.getElementById('confirm-modal').classList.remove('hidden');
            document.getElementById('confirm-message').textContent = message;

            // Store callback for confirm button
            document.getElementById('confirm-action').onclick = () => {
                callback();
                closeConfirmModal();
            };
        }

        function closeConfirmModal() {
            document.getElementById('confirm-modal').classList.add('hidden');
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Load saved data
            loadData();

            // Search functionality
            document.getElementById('match-search').addEventListener('input', renderMatches);

            // Add match events
            document.getElementById('add-match-btn').addEventListener('click', openAddMatchModal);
            document.getElementById('cancel-add-match').addEventListener('click', closeAddMatchModal);
            document.getElementById('match-app').addEventListener('change', function () {
                const otherApp = document.getElementById('other-app');
                if (this.value === 'other') {
                    otherApp.classList.remove('hidden');
                    otherApp.focus();
                } else {
                    otherApp.classList.add('hidden');
                }
            });

            document.getElementById('save-match').addEventListener('click', () => {
                const name = document.getElementById('match-name').value.trim();
                let app = document.getElementById('match-app').value;
                const date = document.getElementById('match-date').value;
                const status = document.getElementById('match-status').value;
                const notes = document.getElementById('match-notes').value.trim();

                if (!name) {
                    alert('Please enter a name');
                    return;
                }

                if (!app) {
                    alert('Please select a dating app');
                    return;
                }

                if (app === 'other') {
                    app = document.getElementById('other-app').value.trim();
                    if (!app) {
                        alert('Please enter the app name');
                        return;
                    }
                }

                // Create new match object
                const newMatch = {
                    id: generateId(),
                    name,
                    app,
                    matchDate: date,
                    status,
                    lastContact: status === 'not_messaged' ? null : date,
                    notes
                };

                // Add to matches array
                appData.matches.push(newMatch);

                // Update last contact based on status
                if (status !== 'not_messaged' && !newMatch.lastContact) {
                    newMatch.lastContact = new Date().toISOString().split('T')[0];
                }

                // Save and update UI
                saveData();
                renderMatches();
                renderReminders();

                // Close modal
                closeAddMatchModal();
            });

            // Edit match events
            document.getElementById('cancel-edit-match').addEventListener('click', closeEditMatchModal);
            document.getElementById('edit-match-app').addEventListener('change', function () {
                const otherApp = document.getElementById('edit-other-app');
                if (this.value === 'other') {
                    otherApp.classList.remove('hidden');
                    otherApp.focus();
                } else {
                    otherApp.classList.add('hidden');
                }
            });

            document.getElementById('update-match').addEventListener('click', function () {
                const matchId = this.dataset.id;
                const match = appData.matches.find(m => m.id === matchId);
                if (!match) return;

                const name = document.getElementById('edit-match-name').value.trim();
                let app = document.getElementById('edit-match-app').value;
                const matchDate = document.getElementById('edit-match-date').value;
                const status = document.getElementById('edit-match-status').value;
                const lastContact = document.getElementById('edit-last-contact').value;
                const notes = document.getElementById('edit-match-notes').value.trim();

                if (!name) {
                    alert('Please enter a name');
                    return;
                }

                if (!app) {
                    alert('Please select a dating app');
                    return;
                }

                if (app === 'other') {
                    app = document.getElementById('edit-other-app').value.trim();
                    if (!app) {
                        alert('Please enter the app name');
                        return;
                    }
                }

                // Update match object
                match.name = name;
                match.app = app;
                match.matchDate = matchDate;
                match.status = status;
                match.lastContact = lastContact;
                match.notes = notes;

                // Save and update UI
                saveData();
                renderMatches();
                renderReminders();

                // Close modal
                closeEditMatchModal();
            });

            document.getElementById('delete-match').addEventListener('click', function () {
                const matchId = this.dataset.id;

                openConfirmModal('Are you sure you want to delete this match?', () => {
                    // Find and remove match
                    const matchIndex = appData.matches.findIndex(m => m.id === matchId);
                    if (matchIndex !== -1) {
                        appData.matches.splice(matchIndex, 1);

                        // Save and update UI
                        saveData();
                        renderMatches();
                        renderReminders();

                        // Close edit modal
                        closeEditMatchModal();
                    }
                });
            });

            // Add app events
            document.getElementById('add-app-btn').addEventListener('click', openAddAppModal);
            document.getElementById('cancel-add-app').addEventListener('click', closeAddAppModal);

            document.getElementById('save-app').addEventListener('click', () => {
                const name = document.getElementById('app-name').value.trim();
                const matchCount = parseInt(document.getElementById('match-count').value.trim()) || 0;
                const notes = document.getElementById('app-notes').value.trim();

                if (!name) {
                    alert('Please enter an app name');
                    return;
                }

                // Check if app already exists
                const existingApp = appData.apps.find(a => a.name === name);
                if (existingApp) {
                    // Update existing app
                    existingApp.matchCount = matchCount;
                    existingApp.notes = notes;
                } else {
                    // Create new app object
                    const newApp = {
                        id: generateId(),
                        name,
                        matchCount,
                        notes
                    };

                    // Add to apps array
                    appData.apps.push(newApp);
                }

                // Save and update UI
                saveData();
                renderProfileStats();

                // Close modal
                closeAddAppModal();
            });

            // Add profile change events
            document.getElementById('add-change-btn').addEventListener('click', openAddChangeModal);
            document.getElementById('cancel-add-change').addEventListener('click', closeAddChangeModal);

            document.getElementById('save-change').addEventListener('click', () => {
                const app = document.getElementById('change-app').value;
                const date = document.getElementById('change-date').value;
                const description = document.getElementById('change-description').value.trim();

                if (!app) {
                    alert('Please select an app');
                    return;
                }

                if (!date) {
                    alert('Please enter a date');
                    return;
                }

                if (!description) {
                    alert('Please enter a description of the change');
                    return;
                }

                // Create new change object
                const newChange = {
                    id: generateId(),
                    app,
                    date,
                    description
                };

                // Add to profile changes array
                appData.profileChanges.push(newChange);

                // Save and update UI
                saveData();
                renderProfileStats();

                // Close modal
                closeAddChangeModal();
            });

            // Profile ideas events
            document.getElementById('save-ideas-btn').addEventListener('click', () => {
                appData.profileIdeas = document.getElementById('profile-ideas').value;
                saveData();
                alert('Profile ideas saved!');
            });

            // Settings events
            document.getElementById('dark-mode-toggle').addEventListener('change', function () {
                if (this.checked) {
                    document.documentElement.classList.add('dark');
                    appData.settings.darkMode = true;
                } else {
                    document.documentElement.classList.remove('dark');
                    appData.settings.darkMode = false;
                }
                saveData();
            });

            document.getElementById('reminder-days').addEventListener('change', function () {
                appData.settings.reminderDays = parseInt(this.value);
                saveData();
            });

            // Data management events
            document.getElementById('export-data-btn').addEventListener('click', () => {
                const dataTransferArea = document.getElementById('data-transfer-area');
                const dataText = document.getElementById('data-text');
                const copyBtn = document.getElementById('copy-export-btn');
                const confirmBtn = document.getElementById('confirm-import-btn');

                dataTransferArea.classList.remove('hidden');
                dataText.value = JSON.stringify(appData);
                dataText.readOnly = true;
                copyBtn.classList.remove('hidden');
                confirmBtn.classList.add('hidden');
            });

            document.getElementById('copy-export-btn').addEventListener('click', () => {
                const dataText = document.getElementById('data-text');
                dataText.select();

                try {
                    navigator.clipboard.writeText(dataText.value).then(() => {
                        alert('Data copied to clipboard!');
                    });
                } catch (err) {
                    alert('Please use Ctrl+C / Cmd+C to copy the data');
                }
            });

            document.getElementById('import-data-btn').addEventListener('click', () => {
                const dataTransferArea = document.getElementById('data-transfer-area');
                const dataText = document.getElementById('data-text');
                const copyBtn = document.getElementById('copy-export-btn');
                const confirmBtn = document.getElementById('confirm-import-btn');

                dataTransferArea.classList.remove('hidden');
                dataText.value = '';
                dataText.readOnly = false;
                dataText.placeholder = 'Paste exported data here...';
                copyBtn.classList.add('hidden');
                confirmBtn.classList.remove('hidden');

                dataText.focus();
            });

            document.getElementById('confirm-import-btn').addEventListener('click', () => {
                const dataText = document.getElementById('data-text').value.trim();

                if (!dataText) {
                    alert('Please paste exported data');
                    return;
                }

                try {
                    const importedData = JSON.parse(dataText);

                    // Validate data structure
                    if (!importedData.matches || !Array.isArray(importedData.matches) ||
                        !importedData.apps || !Array.isArray(importedData.apps) ||
                        !importedData.profileChanges || !Array.isArray(importedData.profileChanges)) {
                        throw new Error('Invalid data format');
                    }

                    // Confirm import
                    openConfirmModal('This will replace all your current data. Continue?', () => {
                        Object.assign(appData, importedData);
                        saveData();
                        loadData();
                        document.getElementById('data-transfer-area').classList.add('hidden');
                        alert('Data imported successfully!');
                    });
                } catch (error) {
                    alert('Invalid data format. Please check the data and try again.');
                }
            });

            document.getElementById('cancel-transfer-btn').addEventListener('click', () => {
                document.getElementById('data-transfer-area').classList.add('hidden');
            });

            document.getElementById('clear-data-btn').addEventListener('click', () => {
                openConfirmModal('This will delete all your data. This action cannot be undone. Continue?', () => {
                    // Reset data
                    appData.matches = [];
                    appData.apps = [];
                    appData.profileChanges = [];
                    appData.profileIdeas = '';

                    // Save and update UI
                    saveData();
                    renderMatches();
                    renderReminders();
                    renderProfileStats();
                    document.getElementById('profile-ideas').value = '';

                    alert('All data has been cleared.');
                });
            });

            // Confirm modal events
            document.getElementById('cancel-confirm').addEventListener('click', closeConfirmModal);
        });
    </script>
</body>

</html>